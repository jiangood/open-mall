# 商城管理端设计文档

## 1. 项目概述

### 1.1 项目背景
本项目是基于open-admin框架开发的商城管理端系统，包含后端Java和前端页面，用于管理商城的核心业务功能。

### 1.2 项目目标
开发一个功能完整、性能稳定、界面友好的商城管理端系统，满足平台管理和商家运营的需求。

### 1.3 项目范围
- 平台管理端：包括会员管理、订单管理、商品管理、促销管理、店铺管理、运营管理、统计管理和系统设置等模块
- 商家端：包括店铺管理、商品管理、订单管理、财务管理、促销管理、统计管理和店铺设置等模块

## 2. 技术架构

### 2.1 后端技术栈
- Java 17
- Spring Boot 3.5.8
- open-admin 1.0.1
- JPA/Hibernate
- MySQL

### 2.2 前端技术栈
- React
- Ant Design
- UmiJS
- @jiangood/open-admin

### 2.3 系统架构
- 架构风格：集成式单体应用 (Integrated Monolith)
- 模块划分：按业务功能划分为多个模块
- 数据流向：前端 → 后端API → 数据库

## 3. 后端设计

### 3.1 模块划分

| 模块 | 包路径 | 主要功能 |
|------|--------|----------|
| 会员管理 | io.github.jiangood.openmall.modules.member | 会员信息管理、会员评价、积分管理、资金流水、充值管理 |
| 订单管理 | io.github.jiangood.openmall.modules.order | 商品订单、虚拟订单、售后处理、订单投诉、收款与退款流水 |
| 商品管理 | io.github.jiangood.openmall.modules.product | 商品管理、商品审核、分类管理、品牌管理、规格管理、计量单位管理 |
| 促销管理 | io.github.jiangood.openmall.modules.promotion | 优惠券、秒杀、砍价、拼团、积分商品 |
| 店铺管理 | io.github.jiangood.openmall.modules.shop | 店铺管理、入驻审核、结算管理、店铺对账 |
| 运营管理 | io.github.jiangood.openmall.modules.operation | 页面装修、分销管理、文章管理、意见反馈、站内信、短信配置 |
| 统计管理 | io.github.jiangood.openmall.modules.statistics | 会员统计、订单统计、流量统计、商品销量统计 |
| 系统设置 | io.github.jiangood.openmall.modules.system | 权限管理、角色管理、部门管理、管理员管理、系统参数、OSS配置、支付配置、物流配置、敏感词管理 |

### 3.2 核心类设计

#### 3.2.1 会员管理模块
- Member：会员信息实体
- MemberDao：会员数据访问
- MemberService：会员业务逻辑
- MemberController：会员接口

#### 3.2.2 订单管理模块
- Order：订单信息实体
- OrderDao：订单数据访问
- OrderService：订单业务逻辑
- OrderController：订单接口

#### 3.2.3 商品管理模块
- Product：商品信息实体
- ProductDao：商品数据访问
- ProductService：商品业务逻辑
- ProductController：商品接口

#### 3.2.4 促销管理模块
- Coupon：优惠券实体
- CouponDao：优惠券数据访问
- CouponService：优惠券业务逻辑
- CouponController：优惠券接口

#### 3.2.5 店铺管理模块
- Shop：店铺信息实体
- ShopDao：店铺数据访问
- ShopService：店铺业务逻辑
- ShopController：店铺接口

#### 3.2.6 运营管理模块
- Article：文章信息实体
- ArticleDao：文章数据访问
- ArticleService：文章业务逻辑
- ArticleController：文章接口

#### 3.2.7 统计管理模块
- StatisticsService：统计业务逻辑
- StatisticsController：统计接口

#### 3.2.8 系统设置模块
- Admin：管理员信息实体
- Role：角色信息实体
- Menu：菜单信息实体
- AdminService：管理员业务逻辑
- RoleService：角色业务逻辑
- MenuService：菜单业务逻辑
- AdminController：管理员接口
- RoleController：角色接口
- MenuController：菜单接口

### 3.3 接口设计

#### 3.3.1 会员管理接口
- GET /admin/member/page：获取会员列表
- POST /admin/member/save：保存会员信息
- GET /admin/member/delete：删除会员信息
- GET /admin/member/options：获取会员下拉选项

#### 3.3.2 订单管理接口
- GET /admin/order/page：获取订单列表
- POST /admin/order/save：保存订单信息
- GET /admin/order/delete：删除订单信息
- GET /admin/order/detail：获取订单详情

#### 3.3.3 商品管理接口
- GET /admin/product/page：获取商品列表
- POST /admin/product/save：保存商品信息
- GET /admin/product/delete：删除商品信息
- GET /admin/product/detail：获取商品详情

#### 3.3.4 促销管理接口
- GET /admin/coupon/page：获取优惠券列表
- POST /admin/coupon/save：保存优惠券信息
- GET /admin/coupon/delete：删除优惠券信息

#### 3.3.5 店铺管理接口
- GET /admin/shop/page：获取店铺列表
- POST /admin/shop/save：保存店铺信息
- GET /admin/shop/delete：删除店铺信息
- GET /admin/shop/audit：审核店铺入驻

#### 3.3.6 运营管理接口
- GET /admin/article/page：获取文章列表
- POST /admin/article/save：保存文章信息
- GET /admin/article/delete：删除文章信息

#### 3.3.7 统计管理接口
- GET /admin/statistics/member：获取会员统计数据
- GET /admin/statistics/order：获取订单统计数据
- GET /admin/statistics/flow：获取流量统计数据
- GET /admin/statistics/product：获取商品销量统计数据

#### 3.3.8 系统设置接口
- GET /admin/admin/page：获取管理员列表
- POST /admin/admin/save：保存管理员信息
- GET /admin/admin/delete：删除管理员信息
- GET /admin/role/page：获取角色列表
- POST /admin/role/save：保存角色信息
- GET /admin/role/delete：删除角色信息
- GET /admin/menu/page：获取菜单列表
- POST /admin/menu/save：保存菜单信息
- GET /admin/menu/delete：删除菜单信息

## 4. 前端设计

### 4.1 页面结构

#### 4.1.1 平台管理端页面
- 首页：/home
- 会员管理：/member
  - 会员列表：/member/list
  - 会员评价：/member/evaluation
  - 积分管理：/member/points
  - 资金流水：/member/finance
  - 充值管理：/member/recharge
- 订单管理：/order
  - 商品订单：/order/product
  - 虚拟订单：/order/virtual
  - 售后处理：/order/aftersale
  - 订单投诉：/order/complaint
  - 收款与退款流水：/order/finance
- 商品管理：/product
  - 商品管理：/product/list
  - 商品审核：/product/audit
  - 分类管理：/product/category
  - 品牌管理：/product/brand
  - 规格管理：/product/spec
  - 计量单位管理：/product/unit
- 促销管理：/promotion
  - 优惠券：/promotion/coupon
  - 秒杀：/promotion/seckill
  - 砍价：/promotion/bargain
  - 拼团：/promotion/group
  - 积分商品：/promotion/points
- 店铺管理：/shop
  - 店铺管理：/shop/list
  - 入驻审核：/shop/audit
  - 结算管理：/shop/settlement
  - 店铺对账：/shop/reconciliation
- 运营管理：/operation
  - 页面装修：/operation/decorate
  - 分销管理：/operation/distribution
  - 文章管理：/operation/article
  - 意见反馈：/operation/feedback
  - 站内信：/operation/message
  - 短信配置：/operation/sms
- 统计管理：/statistics
  - 会员统计：/statistics/member
  - 订单统计：/statistics/order
  - 流量统计：/statistics/flow
  - 商品销量统计：/statistics/product
- 系统设置：/system
  - 权限管理：/system/permission
  - 角色管理：/system/role
  - 部门管理：/system/dept
  - 管理员管理：/system/admin
  - 系统参数：/system/param
  - OSS配置：/system/oss
  - 支付配置：/system/pay
  - 物流配置：/system/logistics
  - 敏感词管理：/system/sensitive

#### 4.1.2 商家端页面
- 店铺首页：/shop/home
- 商品管理：/shop/product
  - 商品发布：/shop/product/add
  - 商品管理：/shop/product/list
  - 运费模板：/shop/product/freight
  - 店铺内分类：/shop/product/category
- 订单管理：/shop/order
  - 订单处理：/shop/order/process
  - 评价管理：/shop/order/evaluation
  - 投诉处理：/shop/order/complaint
  - 退款/退货申请：/shop/order/aftersale
- 财务管理：/shop/finance
  - 店铺对账：/shop/finance/reconciliation
  - 结算管理：/shop/finance/settlement
  - 发票管理：/shop/finance/invoice
- 促销管理：/shop/promotion
  - 优惠券：/shop/promotion/coupon
  - 满减：/shop/promotion/fullreduce
  - 秒杀：/shop/promotion/seckill
  - 拼团：/shop/promotion/group
  - 分销商品：/shop/promotion/distribution
- 统计管理：/shop/statistics
  - 订单统计：/shop/statistics/order
  - 流量分析：/shop/statistics/flow
  - 商品销量排行：/shop/statistics/product
- 店铺设置：/shop/setting
  - 物流配送：/shop/setting/logistics
  - 自提点：/shop/setting/pickup
  - 店铺信息：/shop/setting/info
  - PC/移动端装修：/shop/setting/decorate
  - 店员与权限管理：/shop/setting/staff

### 4.2 组件设计

#### 4.2.1 通用组件
- ProTable：表格组件，支持分页、搜索、排序等功能
- ButtonList：按钮组组件，支持权限控制
- FieldUploadFile：文件上传组件
- HttpUtils：HTTP请求工具类
- Page：页面容器组件

#### 4.2.2 业务组件
- MemberList：会员列表组件
- OrderList：订单列表组件
- ProductList：商品列表组件
- CouponList：优惠券列表组件
- ShopList：店铺列表组件
- ArticleList：文章列表组件
- StatisticsChart：统计图表组件
- AdminList：管理员列表组件
- RoleList：角色列表组件
- MenuList：菜单列表组件

### 4.3 交互流程

#### 4.3.1 会员管理流程
1. 进入会员列表页面
2. 搜索/筛选会员信息
3. 点击编辑按钮修改会员信息
4. 点击删除按钮删除会员信息
5. 进入会员评价页面查看和管理评价
6. 进入积分管理页面设置和管理积分规则
7. 进入资金流水页面查看资金变动记录
8. 进入充值管理页面管理充值记录

#### 4.3.2 订单管理流程
1. 进入订单列表页面
2. 搜索/筛选订单信息
3. 点击订单详情查看订单详细信息
4. 处理订单状态和售后申请
5. 处理订单投诉
6. 查看收款与退款流水

#### 4.3.3 商品管理流程
1. 进入商品列表页面
2. 搜索/筛选商品信息
3.